# PRD 17: DMI Prize Grab - Claw Machine

## Reference Games

### Clawee
- **Platform**: iOS, Android
- **Developer**: Clawee Ltd
- **Screenshots**: 
  - https://play.google.com/store/apps/details?id=com.clawee.clawee
  - https://is1-ssl.mzstatic.com/image/thumb/Purple126/v4/clawee-gameplay.png
- **Key Features**: Real physics-based claw, live cameras showing real machines, variety of prizes, ticket system

### Toreba
- **Platform**: iOS, Android, Web
- **Developer**: CyberStep
- **Screenshots**: https://www.toreba.net/
- **Key Features**: Japanese crane game arcade, real machines controlled online, shipping real prizes worldwide, queue system

### Prize Claw
- **Platform**: iOS, Android
- **Developer**: Game Circus
- **Screenshots**: https://apps.apple.com/us/app/prize-claw/id385879083
- **Key Features**: Digital prizes, multiple machine types, realistic physics, collection system

### Claw Stars
- **Platform**: iOS, Android
- **Screenshots**: https://apps.apple.com/us/app/claw-stars/id1450753159
- **Key Features**: Multiplayer competition, skin customization, seasonal events, battle pass progression

## Core Mechanics

### Primary Actions
1. **Position**: Move claw left/right and forward/backward using directional controls
2. **Drop**: Release claw to descend and attempt grab
3. **Grip**: Claw automatically closes when it reaches bottom
4. **Lift**: Watch claw ascend and transport prize to chute
5. **Claim**: Prize drops through chute if successfully held

### Win/Fail Conditions
- **Win**: Prize is held in claw grip and carried to drop chute without falling
  - Prize must pass threshold line to count as captured
  - Heavier prizes = harder to lift (grip strength mechanic)
- **Fail**: 
  - Claw misses prize completely (poor positioning)
  - Prize slips from grip during ascent (too heavy, bad angle)
  - Prize falls before reaching chute threshold
  - Time runs out before drop (anti-camping)
- **Partial Success**: Claw nudges prizes into better position for next attempt

### Progression System
1. **Ticket Economy**: 
   - Start with 5 free plays
   - Earn tickets through daily login, achievements
   - Watch ads for bonus tickets (optional)
   - Purchase ticket bundles (monetization)
2. **Machine Unlocking**:
   - Basic machines available from start
   - Premium machines unlock at levels 5, 10, 15, 20
   - Specialty event machines (limited time)
3. **Prize Collection**:
   - Display case shows all won prizes
   - Complete themed sets for bonus rewards
   - Rarity tiers: Common → Uncommon → Rare → Epic → Legendary
4. **Skill Progression**:
   - Master claw control through practice
   - Unlock "power-ups" like stronger grip, slow-motion positioning
   - Earn badges for precision (win in 1 attempt, etc.)

## DMI Theme Concept: "Prize Grab - Tool Chest Treasures"

### Creative Title
**"DMI Prize Grab: Build Your Tool Arsenal"**

### Business Context

**Primary Use Cases:**
1. **Trade Show Interactive Kiosk**: 
   - Large touchscreen with claw game
   - Real DMI merchandise inside physical machine
   - Digital version on tablets for multiple simultaneous players
2. **Customer Appreciation Events**:
   - Quarterly "Tool Grab Day" at distributor locations
   - Customers earn plays based on purchase volume
3. **Mobile Loyalty App**:
   - Daily free play for app users
   - Win digital coupons redeemable for real products
4. **Onboarding Gamification**:
   - New customers get 10 welcome plays
   - First-time buyer incentive
5. **Social Media Campaigns**:
   - "Grab-a-thon" events with shared prize pools
   - Influencer partnerships (watch us play live)

**Target Audience:**
- Trade show attendees looking for hands-on engagement
- Existing DMI customers (loyalty rewards)
- Contractors who appreciate tool-related swag
- Younger demographic entering the trades
- Social media followers (contest participants)

### Prizes & Rewards

**Machine Layout**: Multiple themed machines with different prize pools

#### Machine 1: "Beginner's Tool Shed" (Common Prizes)
- **Play Cost**: 1 ticket
- **Prizes** (40-50% win rate):
  - DMI logo stickers (pack of 5)
  - Branded keychains (mini drill bit design)
  - Measuring tape (6ft, DMI branded)
  - Pencils & markers set
  - Bottle opener multi-tool
  - DMI hat or beanie
  - 5% discount code

#### Machine 2: "Pro Workshop" (Uncommon Prizes)
- **Play Cost**: 3 tickets
- **Prizes** (30-35% win rate):
  - Premium DMI t-shirt or polo
  - Insulated water bottle (32oz)
  - LED work light (portable)
  - Tool pouch/belt
  - 10% discount code
  - Safety glasses (premium)
  - Gloves (leather work gloves, DMI branded)

#### Machine 3: "Master Craftsman Vault" (Rare Prizes)
- **Play Cost**: 5 tickets
- **Prizes** (20-25% win rate):
  - Professional tool bag (heavy duty)
  - Diamond blade sampler pack
  - Digital angle finder
  - Laser level (compact model)
  - 15% discount code
  - Limited edition DMI jacket
  - Bluetooth speaker (rugged, industrial)

#### Machine 4: "Diamond Elite Cache" (Epic Prizes)
- **Play Cost**: 10 tickets
- **Prizes** (10-15% win rate):
  - Core bit starter set
  - Professional drill bit set
  - 25% discount code (up to $500)
  - Premium safety gear bundle
  - VIP tour of DMI facility
  - Co-branded tool with winner's name engraved

#### Machine 5: "Legendary Job Site" (Legendary Prizes)
- **Play Cost**: 20 tickets
- **Prizes** (5-10% win rate):
  - Professional core drilling system (value $1,000+)
  - Lifetime 10% customer discount
  - All-expenses-paid training seminar
  - Custom equipment package (personalized)
  - Partnership opportunity (distributors)
  - Year of free drill bit sharpening

### Prize Presentation in Game
Each prize is a 3D object model inside the machine:
- **Small items**: Boxes/packages with clear labels
- **Codes/coupons**: Golden tickets, gift cards
- **Tools**: Miniature but recognizable 3D models
- **Mystery prizes**: DMI-branded boxes (reveals on win)

### Progression & Collection

**Collection System: "Complete the Job Site"**
Players build a virtual job site by collecting themed prize sets:

1. **Safety First Collection** (5 items)
   - Hard hat, safety glasses, gloves, vest, boots
   - **Bonus**: Unlock "Safety Expert" machine with industrial safety gear

2. **Foundation Tools Collection** (6 items)
   - Measuring tape, level, chalk line, marking spray, angle finder, laser measure
   - **Bonus**: Permanent +10% grip strength on all machines

3. **Core Drilling Essentials** (7 items)
   - Core bits (3 sizes), drill attachment, water pump, vacuum, dust shield
   - **Bonus**: Access to "Diamond Vault" machine with premium bits

4. **Power Tools Collection** (5 items)
   - Drill, grinder, saw, impact driver, rotary hammer
   - **Bonus**: "Precision Mode" power-up (slow-motion positioning)

5. **Diamond Master Collection** (8 items - Legendary)
   - All diamond-related products across categories
   - **Bonus**: Custom "Golden Claw" skin + 50 free tickets

**Daily Challenges:**
- "Win 3 prizes today" → +5 tickets
- "Use no more than 5 attempts to win" → +3 tickets
- "Win a prize from each machine type" → +10 tickets
- "Collect a complete themed set" → +20 tickets

**Seasonal Events:**
- "Summer Construction Blitz": Special prizes (coolers, fans, sun protection)
- "Holiday Tool Rush": Gift-wrapped premium tools
- "Back to School" (for trade schools): Student discounts + training materials

### Marketing Angle

**How This Promotes DMI:**

1. **Tactile Brand Experience**: 
   - Physical interaction with DMI products (even virtually)
   - Builds muscle memory association: DMI = quality + fun
   
2. **Product Showcase**:
   - Every prize is a DMI product or branded item
   - Players study prizes closely to aim correctly → product awareness
   - Winners share photos of real prizes received → UGC marketing

3. **Data Collection**:
   - Email/phone required to claim prizes
   - Shipping addresses for physical rewards
   - Preference tracking (which prizes most popular)

4. **Viral Mechanics**:
   - "Watch me win!" video recording feature
   - Social sharing: "I just won [prize] from @DMITools!"
   - Referral program: "Invite 3 friends, get 5 free plays"

5. **Cross-Promotion**:
   - Prize descriptions link to product pages
   - "Want to buy this instead? 10% off in our store"
   - Winners receive catalogs with their prizes

6. **Gamified Sales Funnel**:
   - Free plays → product awareness
   - Discount codes won → first purchase
   - Collection completion → repeat engagement
   - VIP prizes → high-value customer conversion

7. **Event Amplification**:
   - Trade show: "Play at booth #123 to win!"
   - Lines form, creating visible activity
   - Demos of real products while waiting in line

**Call-to-Action Integration:**
- Post-win screen: "Add this to your cart - 10% off today!"
- Collection screen: "Missing items? Shop the full collection"
- Daily reward: "Earn more plays by making a purchase"

## Visual Style Recommendations

### Art Direction
- **Theme**: Industrial arcade meets modern job site
- **Color Palette**:
  - Primary: DMI navy (#003366), construction orange (#FF6B35)
  - Metal tones: Brushed steel (#B0B0B0), chrome accents
  - Prize rarity colors: White (common), Green (uncommon), Blue (rare), Purple (epic), Gold (legendary)
- **Typography**:
  - Headers: Bold industrial (Bebas Neue, uppercase)
  - Body: Clear sans-serif (Roboto)
  - Prize labels: Stencil-style font (military crate aesthetic)

### Visual Elements

1. **Claw Machine Design**:
   - Glass case with realistic reflections
   - Metal frame with DMI branding plates
   - LED strip lighting around edges
   - Prize chute with "DMI Prize Grab" signage
   - Control panel with directional buttons

2. **Claw Design**:
   - Metallic 3-pronged claw (standard arcade style)
   - Upgradeable skins: Chrome, gold-plated, diamond-studded
   - Glow effect when powered up
   - Physics-accurate rope/cable attachment

3. **Machine Interiors**:
   - Themed backdrops (tool shed, workshop, construction site)
   - Prizes arranged in realistic stacks/piles
   - Some prizes partially buried (challenge)
   - Environmental effects (dust particles, light rays)

4. **Prize Models**:
   - High-poly 3D models (2000-5000 triangles each)
   - PBR materials (physically-based rendering)
   - Real-world scale maintained
   - Weight visualization (heavier items sink into pile)

5. **UI/HUD**:
   - Ticket counter (top right, coin-style icons)
   - "Plays Remaining" indicator
   - Mini-map showing claw position (top-down view)
   - Grip strength meter (visual feedback)
   - Timer countdown (when active)

### Animation Standards

- **Claw Movement**: 
  - Smooth interpolation at 0.5 m/s (adjustable)
  - Slight cable sway when stopping
  - Grip animation: 0.3s close, mechanical sound
  - Lift speed: 0.3 m/s upward

- **Prize Physics**:
  - Realistic weight/friction (Phaser Matter.js)
  - Tumbling rotation when lifted
  - Bounce on drop
  - Particle effects when prize shifts (dust puff)

- **Camera**:
  - Primary view: Angled front view (slight isometric)
  - Secondary view: Side view (shows depth)
  - Zoom in slightly when claw descends
  - Celebratory camera shake on win

- **Feedback Animations**:
  - Near-miss: Prize wobbles, "So close!" text appears
  - Win: Confetti burst, prize glow, screen flash
  - Fail: Sad trombone sound, claw returns slowly

### Accessibility
- Colorblind mode (shape + pattern coding for rarities)
- Simplified control scheme (tap-to-move option)
- Audio-only mode (spatial sound cues for positioning)
- Adjustable game speed (for motor skill difficulties)

## Technical Specifications (Phaser 3)

### Core Systems

#### 1. Claw Control System
```javascript
class ClawController {
  constructor(scene, startPos) {
    this.claw = scene.matter.add.sprite(startPos.x, startPos.y, 'claw');
    this.claw.setStatic(true); // Non-physical until drop
    this.state = 'positioning'; // positioning | descending | gripping | ascending | returning
    this.gripStrength = 1.0; // Affects hold duration
    this.position = { x: startPos.x, y: startPos.y };
  }
  
  move(direction, delta) {
    // direction: 'left', 'right', 'forward', 'back'
    // Update position with bounds checking
    // Smooth interpolation
    // Cable physics (rope constraint)
  }
  
  drop() {
    this.state = 'descending';
    this.claw.setStatic(false);
    // Tween to bottom position
    // On complete: trigger grip()
  }
  
  grip() {
    this.state = 'gripping';
    // Check collision with prize objects
    // Create constraint to "grabbed" objects
    // If multiple objects, select closest to claw center
    // Play grip animation + sound
  }
  
  lift() {
    this.state = 'ascending';
    // Apply upward force to claw
    // Grabbed objects constrained to move with claw
    // Monitor constraints (can break if weight too high)
    // On reach top: moveToChute()
  }
  
  checkWin() {
    // If grabbed object crossed chute threshold
    // Release constraint, trigger win
    // Else: release and fail
  }
}
```

#### 2. Prize Physics System
```javascript
class PrizeManager {
  constructor(scene, machineConfig) {
    this.scene = scene;
    this.prizes = [];
    this.spawnPrizes(machineConfig.prizePool);
  }
  
  spawnPrizes(prizePool) {
    prizePool.forEach(prizeData => {
      const prize = this.scene.matter.add.sprite(
        prizeData.x, prizeData.y, prizeData.sprite
      );
      prize.setMass(prizeData.weight); // kg
      prize.setFriction(0.6);
      prize.setBounce(0.2);
      prize.setData('prizeInfo', prizeData);
      this.prizes.push(prize);
    });
  }
  
  checkGrabability(claw, prize) {
    // Distance from claw center
    // Prize weight vs grip strength
    // Return probability of successful grab
  }
  
  updatePile() {
    // Ensure prizes settle realistically
    // Prevent clipping through floor
    // Apply slight random shifts (pile instability)
  }
}
```

#### 3. Machine Manager
```javascript
class MachineManager {
  constructor() {
    this.machines = [
      { id: 1, name: "Beginner's Tool Shed", ticketCost: 1, winRate: 0.45, prizes: [...] },
      { id: 2, name: "Pro Workshop", ticketCost: 3, winRate: 0.32, prizes: [...] },
      // ...
    ];
    this.currentMachine = this.machines[0];
  }
  
  selectMachine(id) {
    // Load machine configuration
    // Set up prize pool
    // Initialize claw at starting position
  }
  
  calculateWinRate() {
    // Dynamic difficulty adjustment
    // If player losing streak > 5, increase grip strength slightly
    // If player win streak > 3, decrease grip slightly
    // Maintain target win rate over session
  }
}
```

#### 4. Collection & Progression System
```javascript
class CollectionManager {
  constructor() {
    this.collections = {
      'safety-first': { items: [], complete: false, bonus: 'unlock_machine_safety' },
      'foundation-tools': { items: [], complete: false, bonus: 'grip_strength_10' },
      // ...
    };
    this.displayCase = []; // All won prizes
  }
  
  addPrize(prizeData) {
    this.displayCase.push(prizeData);
    this.checkCollections(prizeData);
    this.saveToServer(prizeData); // Persist
  }
  
  checkCollections(prize) {
    // Find which collection(s) this prize belongs to
    // Mark as collected
    // If collection complete, award bonus
  }
  
  getCompletionPercentage() {
    // For achievements/stats
  }
}
```

#### 5. Ticket Economy
```javascript
class TicketSystem {
  constructor() {
    this.tickets = 5; // Starting amount
    this.dailyFree = 3; // Free tickets per day
    this.lastDailyClaimTime = Date.now();
  }
  
  spendTickets(amount) {
    if (this.tickets >= amount) {
      this.tickets -= amount;
      return true;
    }
    return false; // Insufficient tickets
  }
  
  earnTickets(amount, source) {
    this.tickets += amount;
    // Log analytics: ticket_earned(amount, source)
  }
  
  checkDailyBonus() {
    const now = Date.now();
    if (now - this.lastDailyClaimTime > 24 * 60 * 60 * 1000) {
      this.earnTickets(this.dailyFree, 'daily_login');
      this.lastDailyClaimTime = now;
    }
  }
}
```

### Asset Requirements

**3D Models:**
- Claw machine exterior: Frame, glass panels, chute (FBX/GLTF)
- Claw: 3-prong gripper, cable (rigged for animation)
- Prizes: 50+ unique models (tools, boxes, gift cards, clothing items)
  - LOD versions (high/medium/low poly)
- Environmental: Tool shed, workshop, construction site backgrounds

**Textures:**
- PBR material sets (albedo, normal, metallic, roughness)
- Prize labels/decals (DMI branding)
- Glass/reflection cubemaps
- Particle textures (dust, confetti, sparkles)

**Sprites/UI:**
- Ticket icons (coin-style, animated)
- Machine selection thumbnails (256×256px)
- Prize info cards (display when won)
- Tutorial images (control layout)
- Achievement badges (64×64px)

**Audio:**
- Claw movement: Servo motor hum (looping)
- Claw drop: Mechanical release click
- Grip: Pneumatic hiss + clamp sound
- Prize contact: Thud/clatter (varied by material)
- Win: Triumphant fanfare + coin sounds
- Fail: Sad trombone or sigh
- Ambient: Arcade ambience (distant games, chatter)
- Music: Upbeat instrumental (2-3 minute loop)

**Animations:**
- Claw idle: Slight sway
- Claw grip: Close prongs (0.3s)
- Prize wobble: When nudged
- Win celebration: Confetti particle system
- UI transitions: Slide/fade (300ms)

### Performance Optimization

1. **Physics Optimization**:
   - Active physics only within machine interior (disable outside)
   - Sleep inactive prizes (not recently moved)
   - Simplified collision shapes (box/sphere approximations)
   - Limit max simultaneous physics objects to 30

2. **Rendering**:
   - Frustum culling (don't render off-screen machines)
   - Texture atlases for UI elements
   - Compressed textures (basis universal format)
   - Adaptive quality settings (detect device capability)

3. **3D Model Optimization**:
   - LOD system (swap models based on camera distance)
   - Instanced rendering for repeated objects
   - Bake lighting where possible (static elements)

4. **Network**:
   - Progressive loading (machine data loaded on demand)
   - Prize claim requests batched (every 30s max)
   - Offline mode (queue claims, sync when online)

### Screen Layouts

**Main Game Screen (Landscape 16:9):**
- Top bar (1920×80): Tickets, settings, info button
- Machine view (1400×900): Main 3D rendering viewport
- Control panel (1920×180): Directional pad, drop button, timer
- Side panel (520×900): Current machine info, next prize preview

**Machine Selection Screen:**
- Grid layout: 2-3 machines per row
- Each card shows: Preview image, name, ticket cost, win rate indicator
- "Locked" machines show unlock requirements

**Collection Screen:**
- Tabbed interface (one tab per collection)
- Grid of prize slots (filled = collected, empty = silhouette)
- Progress bar at top
- "Claim Bonus" button when complete

**Prize Won Screen:**
- Full-screen takeover with semi-transparent background
- Large prize image (center)
- Prize details (name, description, how to redeem)
- Social share buttons
- "Play Again" / "View Collection" / "Quit" buttons

### Integration Points

**Backend API:**
1. `GET /api/player/tickets` - Current ticket balance
2. `POST /api/play` - Initiate play (deduct tickets, log attempt)
3. `POST /api/win` - Report win (anti-cheat validation server-side)
4. `POST /api/prizes/claim` - Claim physical prize (requires shipping info)
5. `GET /api/collections` - Player's collection status
6. `GET /api/machines` - Available machines, configs, prize pools
7. `POST /api/tickets/purchase` - Buy ticket bundles (IAP integration)

**Analytics Events:**
- `machine_selected` (machine_id)
- `play_started` (ticket_cost, machine_id)
- `play_result` (win/loss, prize_id, attempt_number)
- `prize_claimed` (prize_id, redemption_method)
- `collection_complete` (collection_id)
- `tickets_purchased` (quantity, revenue)
- `daily_login` (free_tickets_claimed)

**Anti-Cheat Measures:**
1. Server-side physics validation (position tracking)
2. Win rate monitoring (flag suspiciously high rates)
3. Ticket transaction logging (detect injection)
4. Session replay system (admin review)
5. Device fingerprinting (prevent multi-account abuse)

**Admin Dashboard:**
- Real-time play statistics
- Win rate by machine (adjust difficulty)
- Most/least popular prizes (restock decisions)
- Player lifetime value tracking
- Fraud alert system

## PRD Summary

**DMI Prize Grab: Build Your Tool Arsenal** brings the addictive fun of arcade claw machines to DMI's marketing toolkit. Players use intuitive controls to position a 3D claw, drop it into a pile of DMI-branded prizes, and attempt to grab items ranging from stickers to professional core drilling systems. The game employs realistic physics—prize weight, grip strength, and pile dynamics—to create an authentic, challenging experience that keeps players coming back.

Five themed machines offer progressively valuable prizes, from the "Beginner's Tool Shed" (DMI hats, measuring tapes, 5% discount codes) to the "Legendary Job Site" (professional drilling systems, lifetime discounts, VIP experiences). Players spend tickets to play, earning more through daily logins, achievements, and optional purchases. The collection system drives engagement: complete the "Safety First Collection" to unlock a special machine, or finish the "Diamond Master Collection" for a golden claw skin and 50 free tickets. Daily challenges and seasonal events provide fresh reasons to return.

From a business perspective, DMI Prize Grab excels as both a lead generation and retention tool. At trade shows, touchscreen kiosks running the game draw crowds—lines form, creating visible booth activity. Winners share photos of real prizes on social media, generating authentic UGC. The mobile app version keeps existing customers engaged between purchases, offering monthly free plays and exclusive prizes. Every interaction reinforces product awareness: players study DMI tools carefully to aim correctly, prize descriptions link to the full catalog, and discount codes drive immediate sales. Built on Phaser 3 with Matter.js physics, the game delivers smooth, realistic claw behavior across devices, from desktop kiosks to smartphones, ensuring maximum reach for DMI's interactive marketing campaigns.
